<script type="text/javascript">

      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {



        // Create the data table.
        var sdata<%=source_id%> = new google.visualization.DataTable();
        sdata<%=source_id%>.addColumn('number', 'Frequency');
        sdata<%=source_id%>.addColumn('number', 'Flux Density [Jy]');
        sdata<%=source_id%>.addColumn({type:'number', role:'interval'});
        sdata<%=source_id%>.addColumn({type:'number', role:'interval'});
        sdata<%=source_id%>.addColumn({type:'boolean', role: 'certainty'});
        sdata<%=source_id%>.addRows(<%= data %>);

        // Set chart options
        var soptions<%=source_id%> = {title:'Spectrum of <%= Source.find(source_id).j2000_name.to_s %>' ,
                       legend: { position: 'none'},
                       vAxis: { title: 'Flux Density [Jy]' },
                       hAxis: { title: 'Frequency [GHz]' } };

        // Instantiate and draw our chart, passing in some options.
        var schart<%=source_id%> = new google.visualization.LineChart(document.getElementById("spectrum<%=source_id.to_s%>"));
        schart<%=source_id%>.draw(sdata<%=source_id%>, soptions<%=source_id%>);

}
</script>

<div id="spectrum<%=source_id.to_s%>" style='width: 700px; height: 500px'></div>